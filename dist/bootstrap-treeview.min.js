!function(d,e,f,g){var h="treeview",a={};a.settings={injectStyle:!0,levels:2,expandIcon:"glyphicon glyphicon-plus",collapseIcon:"glyphicon glyphicon-minus",emptyIcon:"glyphicon",nodeIcon:"",selectedIcon:"",checkedIcon:"glyphicon glyphicon-check",uncheckedIcon:"glyphicon glyphicon-unchecked",color:g,backColor:g,borderColor:g,onhoverColor:"#F5F5F5",selectedColor:"#FFFFFF",selectedBackColor:"#428bca",searchResultColor:"#D9534F",searchResultBackColor:g,enableLinks:!1,highlightSelected:!0,highlightSearchResults:!0,showBorder:!0,showIcon:!0,showCheckbox:!1,showTags:!1,multiSelect:!1,onLoading:g,onLoadingFailed:g,onInitialized:g,onNodeChecked:g,onNodeCollapsed:g,onNodeDisabled:g,onNodeEnabled:g,onNodeExpanded:g,onNodeSelected:g,onNodeUnchecked:g,onNodeUnselected:g,onSearchComplete:g,onSearchCleared:g},a.options={silent:!1,ignoreChildren:!1},a.searchOptions={ignoreCase:!0,exactMatch:!1,revealResults:!0},a.dataUrl={method:"GET",dataType:"json",cache:!1};var b=function(i,j){return this.$element=d(i),this.elementId=i.id,this.styleId=this.elementId+"-style",this.init(j),{options:this.options,init:d.proxy(this.init,this),remove:d.proxy(this.remove,this),reload:d.proxy(this.reload,this),getNode:d.proxy(this.getNode,this),getParent:d.proxy(this.getParent,this),getSiblings:d.proxy(this.getSiblings,this),getSelected:d.proxy(this.getSelected,this),getUnselected:d.proxy(this.getUnselected,this),getExpanded:d.proxy(this.getExpanded,this),getCollapsed:d.proxy(this.getCollapsed,this),getChecked:d.proxy(this.getChecked,this),getUnchecked:d.proxy(this.getUnchecked,this),getDisabled:d.proxy(this.getDisabled,this),getEnabled:d.proxy(this.getEnabled,this),selectNode:d.proxy(this.selectNode,this),unselectNode:d.proxy(this.unselectNode,this),toggleNodeSelected:d.proxy(this.toggleNodeSelected,this),collapseAll:d.proxy(this.collapseAll,this),collapseNode:d.proxy(this.collapseNode,this),expandAll:d.proxy(this.expandAll,this),expandNode:d.proxy(this.expandNode,this),toggleNodeExpanded:d.proxy(this.toggleNodeExpanded,this),revealNode:d.proxy(this.revealNode,this),checkAll:d.proxy(this.checkAll,this),checkNode:d.proxy(this.checkNode,this),uncheckAll:d.proxy(this.uncheckAll,this),uncheckNode:d.proxy(this.uncheckNode,this),toggleNodeChecked:d.proxy(this.toggleNodeChecked,this),disableAll:d.proxy(this.disableAll,this),disableNode:d.proxy(this.disableNode,this),enableAll:d.proxy(this.enableAll,this),enableNode:d.proxy(this.enableNode,this),toggleNodeDisabled:d.proxy(this.toggleNodeDisabled,this),search:d.proxy(this.search,this),clearSearch:d.proxy(this.clearSearch,this)}};b.prototype.init=function(i){this.tree=[],this.nodes=[],this.initialized=!1,this.options=d.extend({},a.settings,i),this.destroy(),this.subscribeEvents(),this.triggerEvent("loading",null,a.options);this.load(i).then(d.proxy(function(j){return this.tree=d.extend(true,[],j)},this),d.proxy(function(j){this.triggerEvent("loadingFailed",j,a.options)},this)).then(d.proxy(function(j){return this.setInitialStates({nodes:j},0)},this)).then(d.proxy(function(){this.render()},this))},b.prototype.load=function(i){var j=new d.Deferred();if(i.data){this.loadLocalData(i,j)}else{if(i.dataUrl){this.loadRemoteData(i,j)}}return j.promise()},b.prototype.loadRemoteData=function(i,j){d.ajax(d.extend(true,{},a.dataUrl,i.dataUrl)).done(function(k){j.resolve(k)}).fail(function(l,k,m){j.reject(m)})},b.prototype.loadLocalData=function(i,j){j.resolve((typeof i.data==="string")?d.parseJSON(i.data):d.extend(true,[],i.data))},b.prototype.reload=function(){this.load(this.options).then(d.proxy(function(i){return this.tree=d.extend(true,[],i)},this),d.proxy(function(i){this.triggerEvent("loadingFailed",i,a.options)},this)).then(d.proxy(function(i){return this.setInitialStates({nodes:i},0)},this)).then(d.proxy(function(){this.render()},this))},b.prototype.remove=function(){this.destroy(),d.removeData(this,h),d("#"+this.styleId).remove()},b.prototype.destroy=function(){this.initialized&&(this.$wrapper.remove(),this.$wrapper=null,this.unsubscribeEvents(),this.initialized=!1)},b.prototype.unsubscribeEvents=function(){this.$element.off("click"),this.$element.off("loading"),this.$element.off("loadingFailed"),this.$element.off("initialized"),this.$element.off("nodeChecked"),this.$element.off("nodeCollapsed"),this.$element.off("nodeDisabled"),this.$element.off("nodeEnabled"),this.$element.off("nodeExpanded"),this.$element.off("nodeSelected"),this.$element.off("nodeUnchecked"),this.$element.off("nodeUnselected"),this.$element.off("searchComplete"),this.$element.off("searchCleared")},b.prototype.subscribeEvents=function(){this.unsubscribeEvents(),this.$element.on("click",d.proxy(this.clickHandler,this)),"function"==typeof this.options.onLoading&&this.$element.on("loading",this.options.onLoading),"function"==typeof this.options.onLoadingFailed&&this.$element.on("loadingFailed",this.options.onLoadingFailed),"function"==typeof this.options.onInitialized&&this.$element.on("initialized",this.options.onInitialized),"function"==typeof this.options.onNodeChecked&&this.$element.on("nodeChecked",this.options.onNodeChecked),"function"==typeof this.options.onNodeCollapsed&&this.$element.on("nodeCollapsed",this.options.onNodeCollapsed),"function"==typeof this.options.onNodeDisabled&&this.$element.on("nodeDisabled",this.options.onNodeDisabled),"function"==typeof this.options.onNodeEnabled&&this.$element.on("nodeEnabled",this.options.onNodeEnabled),"function"==typeof this.options.onNodeExpanded&&this.$element.on("nodeExpanded",this.options.onNodeExpanded),"function"==typeof this.options.onNodeSelected&&this.$element.on("nodeSelected",this.options.onNodeSelected),"function"==typeof this.options.onNodeUnchecked&&this.$element.on("nodeUnchecked",this.options.onNodeUnchecked),"function"==typeof this.options.onNodeUnselected&&this.$element.on("nodeUnselected",this.options.onNodeUnselected),"function"==typeof this.options.onSearchComplete&&this.$element.on("searchComplete",this.options.onSearchComplete),"function"==typeof this.options.onSearchCleared&&this.$element.on("searchCleared",this.options.onSearchCleared)},b.prototype.triggerEvent=function(k,i,j){if(j&&!j.silent){this.$element.trigger(k,d.extend(1,{},i))}},b.prototype.setInitialStates=function(i,j){if(i.nodes){j+=1;var k=i,l=this;d.each(i.nodes,function(m,n){n.nodeId=l.nodes.length,n.parentId=k.nodeId,n.hasOwnProperty("selectable")||(n.selectable=!0),n.state=n.state||{},n.state.hasOwnProperty("checked")||(n.state.checked=!1),n.state.hasOwnProperty("disabled")||(n.state.disabled=!1),n.state.hasOwnProperty("expanded")||(!n.state.disabled&&j<l.options.levels&&n.nodes&&n.nodes.length>0?n.state.expanded=!0:n.state.expanded=!1),n.state.hasOwnProperty("selected")||(n.state.selected=!1),l.nodes.push(n),n.nodes&&l.setInitialStates(n,j)})}},b.prototype.clickHandler=function(i){this.options.enableLinks||i.preventDefault();var j=d(i.target),k=this.findNode(j);if(k&&!k.state.disabled){var l=j.attr("class")?j.attr("class").split(" "):[];-1!==l.indexOf("expand-icon")?(this.toggleExpandedState(k,a.options),this.render()):-1!==l.indexOf("check-icon")?(this.toggleCheckedState(k,a.options),this.render()):(k.selectable?this.toggleSelectedState(k,a.options):this.toggleExpandedState(k,a.options),this.render())}},b.prototype.findNode=function(j){var k=j.closest("li.list-group-item").attr("data-nodeid"),i=this.nodes[k];return i||console.log("Error: node does not exist"),i},b.prototype.toggleExpandedState=function(i,j){i&&this.setExpandedState(i,!i.state.expanded,j)},b.prototype.setExpandedState=function(i,j,k){j!==i.state.expanded&&(j&&i.nodes?(i.state.expanded=!0,k.silent||this.$element.trigger("nodeExpanded",d.extend(!0,{},i))):j||(i.state.expanded=!1,k.silent||this.$element.trigger("nodeCollapsed",d.extend(!0,{},i)),i.nodes&&!k.ignoreChildren&&d.each(i.nodes,d.proxy(function(l,m){this.setExpandedState(m,!1,k)},this))))},b.prototype.toggleSelectedState=function(i,j){i&&this.setSelectedState(i,!i.state.selected,j)},b.prototype.setSelectedState=function(i,j,k){j!==i.state.selected&&(j?(this.options.multiSelect||d.each(this.findNodes("true","g","state.selected"),d.proxy(function(l,m){this.setSelectedState(m,!1,k)},this)),i.state.selected=!0,k.silent||this.$element.trigger("nodeSelected",d.extend(!0,{},i))):(i.state.selected=!1,k.silent||this.$element.trigger("nodeUnselected",d.extend(!0,{},i))))},b.prototype.toggleCheckedState=function(i,j){i&&this.setCheckedState(i,!i.state.checked,j)},b.prototype.setCheckedState=function(i,j,k){j!==i.state.checked&&(j?(i.state.checked=!0,k.silent||this.$element.trigger("nodeChecked",d.extend(!0,{},i))):(i.state.checked=!1,k.silent||this.$element.trigger("nodeUnchecked",d.extend(!0,{},i))))},b.prototype.setDisabledState=function(i,j,k){j!==i.state.disabled&&(j?(i.state.disabled=!0,this.setExpandedState(i,!1,k),this.setSelectedState(i,!1,k),this.setCheckedState(i,!1,k),k.silent||this.$element.trigger("nodeDisabled",d.extend(!0,{},i))):(i.state.disabled=!1,k.silent||this.$element.trigger("nodeEnabled",d.extend(!0,{},i))))},b.prototype.render=function(){this.initialized||(this.$element.addClass(h),this.$wrapper=d(this.template.list),this.injectStyle(),this.initialized=!0),this.$element.empty().append(this.$wrapper.empty()),this.buildTree(this.tree,0)},b.prototype.buildTree=function(i,j){if(i){j+=1;var k=this;d.each(i,function(p,l){for(var m=d(k.template.item).addClass("node-"+k.elementId).addClass(l.state.checked?"node-checked":"").addClass(l.state.disabled?"node-disabled":"").addClass(l.state.selected?"node-selected":"").addClass(l.searchResult?"search-result":"").attr("data-nodeid",l.nodeId).attr("style",k.buildStyleOverride(l)),n=0;j-1>n;n++){m.append(k.template.indent)}var o=[];if(l.nodes?(o.push("expand-icon"),o.push(l.state.expanded?k.options.collapseIcon:k.options.expandIcon)):o.push(k.options.emptyIcon),m.append(d(k.template.icon).addClass(o.join(" "))),k.options.showIcon){var o=["node-icon"];o.push(l.icon||k.options.nodeIcon),l.state.selected&&(o.pop(),o.push(l.selectedIcon||k.options.selectedIcon||l.icon||k.options.nodeIcon)),m.append(d(k.template.icon).addClass(o.join(" ")))}if(k.options.showCheckbox){var o=["check-icon"];o.push(l.state.checked?k.options.checkedIcon:k.options.uncheckedIcon),m.append(d(k.template.icon).addClass(o.join(" ")))}return m.append(k.options.enableLinks?d(k.template.link).attr("href",l.href).append(l.text):l.text),k.options.showTags&&l.tags&&d.each(l.tags,function(r,q){m.append(d(k.template.badge).append(q))}),k.$wrapper.append(m),l.nodes&&l.state.expanded&&!l.state.disabled?k.buildTree(l.nodes,j):void 0})}},b.prototype.buildStyleOverride=function(j){if(j.state.disabled){return""}var k=j.color,i=j.backColor;return this.options.highlightSelected&&j.state.selected&&(this.options.selectedColor&&(k=this.options.selectedColor),this.options.selectedBackColor&&(i=this.options.selectedBackColor)),this.options.highlightSearchResults&&j.searchResult&&!j.state.disabled&&(this.options.searchResultColor&&(k=this.options.searchResultColor),this.options.searchResultBackColor&&(i=this.options.searchResultBackColor)),"color:"+k+";background-color:"+i+";"},b.prototype.injectStyle=function(){this.options.injectStyle&&!f.getElementById(this.styleId)&&d('<style type="text/css" id="'+this.styleId+'"> '+this.buildStyle()+" </style>").appendTo("head")},b.prototype.buildStyle=function(){var i=".node-"+this.elementId+"{";return this.options.color&&(i+="color:"+this.options.color+";"),this.options.backColor&&(i+="background-color:"+this.options.backColor+";"),this.options.showBorder?this.options.borderColor&&(i+="border:1px solid "+this.options.borderColor+";"):i+="border:none;",i+="}",this.options.onhoverColor&&(i+=".node-"+this.elementId+":not(.node-disabled):hover{background-color:"+this.options.onhoverColor+";}"),this.css+i},b.prototype.template={list:'<ul class="list-group"></ul>',item:'<li class="list-group-item"></li>',indent:'<span class="indent"></span>',icon:'<span class="icon"></span>',link:'<a href="#" style="color:inherit;"></a>',badge:'<span class="badge"></span>'},b.prototype.css=".treeview .list-group-item{cursor:pointer}.treeview span.indent{margin-left:10px;margin-right:10px}.treeview span.icon{width:12px;margin-right:5px}.treeview .node-disabled{color:silver;cursor:not-allowed}",b.prototype.getNode=function(i){return this.nodes[i]},b.prototype.getParent=function(i){var j=this.identifyNode(i);return this.nodes[j.parentId]},b.prototype.getSiblings=function(k){var l=this.identifyNode(k),i=this.getParent(l),j=i?i.nodes:this.tree;return j.filter(function(m){return m.nodeId!==l.nodeId})},b.prototype.getSelected=function(){return this.findNodes("true","g","state.selected")},b.prototype.getUnselected=function(){return this.findNodes("false","g","state.selected")},b.prototype.getExpanded=function(){return this.findNodes("true","g","state.expanded")},b.prototype.getCollapsed=function(){return this.findNodes("false","g","state.expanded")},b.prototype.getChecked=function(){return this.findNodes("true","g","state.checked")},b.prototype.getUnchecked=function(){return this.findNodes("false","g","state.checked")},b.prototype.getDisabled=function(){return this.findNodes("true","g","state.disabled")},b.prototype.getEnabled=function(){return this.findNodes("false","g","state.disabled")},b.prototype.selectNode=function(i,j){this.forEachIdentifier(i,j,d.proxy(function(k,l){this.setSelectedState(k,!0,l)},this)),this.render()},b.prototype.unselectNode=function(i,j){this.forEachIdentifier(i,j,d.proxy(function(k,l){this.setSelectedState(k,!1,l)},this)),this.render()},b.prototype.toggleNodeSelected=function(i,j){this.forEachIdentifier(i,j,d.proxy(function(k,l){this.toggleSelectedState(k,l)},this)),this.render()},b.prototype.collapseAll=function(i){var j=this.findNodes("true","g","state.expanded");this.forEachIdentifier(j,i,d.proxy(function(k,l){this.setExpandedState(k,!1,l)},this)),this.render()},b.prototype.collapseNode=function(i,j){this.forEachIdentifier(i,j,d.proxy(function(k,l){this.setExpandedState(k,!1,l)},this)),this.render()},b.prototype.expandAll=function(i){if(i=d.extend({},a.options,i),i&&i.levels){this.expandLevels(this.tree,i.levels,i)}else{var j=this.findNodes("false","g","state.expanded");this.forEachIdentifier(j,i,d.proxy(function(k,l){this.setExpandedState(k,!0,l)},this))}this.render()},b.prototype.expandNode=function(i,j){this.forEachIdentifier(i,j,d.proxy(function(k,l){this.setExpandedState(k,!0,l),k.nodes&&l&&l.levels&&this.expandLevels(k.nodes,l.levels-1,l)},this)),this.render()},b.prototype.expandLevels=function(i,j,k){k=d.extend({},a.options,k),d.each(i,d.proxy(function(l,m){this.setExpandedState(m,j>0?!0:!1,k),m.nodes&&this.expandLevels(m.nodes,j-1,k)},this))},b.prototype.revealNode=function(i,j){this.forEachIdentifier(i,j,d.proxy(function(l,m){for(var k=this.getParent(l);k;){this.setExpandedState(k,!0,m),k=this.getParent(k)}},this)),this.render()},b.prototype.toggleNodeExpanded=function(i,j){this.forEachIdentifier(i,j,d.proxy(function(k,l){this.toggleExpandedState(k,l)},this)),this.render()},b.prototype.checkAll=function(i){var j=this.findNodes("false","g","state.checked");this.forEachIdentifier(j,i,d.proxy(function(k,l){this.setCheckedState(k,!0,l)},this)),this.render()},b.prototype.checkNode=function(i,j){this.forEachIdentifier(i,j,d.proxy(function(k,l){this.setCheckedState(k,!0,l)},this)),this.render()},b.prototype.uncheckAll=function(i){var j=this.findNodes("true","g","state.checked");this.forEachIdentifier(j,i,d.proxy(function(k,l){this.setCheckedState(k,!1,l)},this)),this.render()},b.prototype.uncheckNode=function(i,j){this.forEachIdentifier(i,j,d.proxy(function(k,l){this.setCheckedState(k,!1,l)},this)),this.render()},b.prototype.toggleNodeChecked=function(i,j){this.forEachIdentifier(i,j,d.proxy(function(k,l){this.toggleCheckedState(k,l)},this)),this.render()},b.prototype.disableAll=function(i){var j=this.findNodes("false","g","state.disabled");this.forEachIdentifier(j,i,d.proxy(function(k,l){this.setDisabledState(k,!0,l)},this)),this.render()},b.prototype.disableNode=function(i,j){this.forEachIdentifier(i,j,d.proxy(function(k,l){this.setDisabledState(k,!0,l)},this)),this.render()},b.prototype.enableAll=function(i){var j=this.findNodes("true","g","state.disabled");this.forEachIdentifier(j,i,d.proxy(function(k,l){this.setDisabledState(k,!1,l)},this)),this.render()},b.prototype.enableNode=function(i,j){this.forEachIdentifier(i,j,d.proxy(function(k,l){this.setDisabledState(k,!1,l)},this)),this.render()},b.prototype.toggleNodeDisabled=function(i,j){this.forEachIdentifier(i,j,d.proxy(function(k,l){this.setDisabledState(k,!k.state.disabled,l)},this)),this.render()},b.prototype.forEachIdentifier=function(i,j,k){j=d.extend({},a.options,j),i instanceof Array||(i=[i]),d.each(i,d.proxy(function(l,m){k(this.identifyNode(m),j)},this))},b.prototype.identifyNode=function(i){return"number"==typeof i?this.nodes[i]:i},b.prototype.search=function(i,j){j=d.extend({},a.searchOptions,j),this.clearSearch({render:!1});var k=[];if(i&&i.length>0){j.exactMatch&&(i="^"+i+"$");var l="g";j.ignoreCase&&(l+="i"),k=this.findNodes(i,l),d.each(k,function(m,n){n.searchResult=!0})}return j.revealResults?this.revealNode(k):this.render(),this.$element.trigger("searchComplete",d.extend(!0,{},k)),k},b.prototype.clearSearch=function(i){i=d.extend({},{render:!0},i);var j=d.each(this.findNodes("true","g","searchResult"),function(k,l){l.searchResult=!1});i.render&&this.render(),this.$element.trigger("searchCleared",d.extend(!0,{},j))},b.prototype.findNodes=function(i,j,k){j=j||"g",k=k||"text";var l=this;return d.grep(this.nodes,function(m){var n=l.getNodeValue(m,k);return"string"==typeof n?n.match(new RegExp(i,j)):void 0})},b.prototype.getNodeValue=function(k,m){var j=m.indexOf(".");if(j>0){var l=k[m.substring(0,j)],i=m.substring(j+1,m.length);return this.getNodeValue(l,i)}return k.hasOwnProperty(m)?k[m].toString():g};var c=function(i){e.console&&e.console.error(i)};d.fn[h]=function(i,j){var k;return this.each(function(){var l=d.data(this,h);"string"==typeof i?l?d.isFunction(l[i])&&"_"!==i.charAt(0)?(j instanceof Array||(j=[j]),k=l[i].apply(l,j)):c("No such method : "+i):c("Not initialized, can not call method : "+i):"boolean"==typeof i?k=l:d.data(this,h,new b(this,d.extend(!0,{},i)))}),k||this}}(jQuery,window,document);
